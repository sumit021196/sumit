import{N as z,j as e,r as o,aa as U,ab as M,ac as _,u as $,B as n,C as g,P as H,T as P,b as G,a2 as L,I as J,L as k,ad as K,ae as Q}from"./main-c94d187b.js";import{C as X}from"./Container-3f36393e.js";import{A as E}from"./Alert-2d396222.js";import{T as x}from"./TextField-26dbe2df.js";import{I as Y}from"./InputAdornment-92293f98.js";import{V as Z,a as ee}from"./VisibilityOff-97998104.js";import{L as F}from"./Link-8ad922af.js";import"./Select-9fd389ba.js";import"./useControlled-94dd4eb6.js";const se=z(e.jsx("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google");function de(){const[i,f]=o.useState(""),[l,h]=o.useState(""),[c,N]=o.useState(!1),[r,p]=o.useState(!1),[u,y]=o.useState(""),[j,a]=o.useState(""),[b,d]=o.useState(""),[m,v]=o.useState(!1),[w,C]=o.useState(!1),{user:S,signIn:T,signUp:W,loading:B}=U(),I=M(),A=_(),D=$();o.useEffect(()=>{var s,t;if(S){const R=((t=(s=A.state)==null?void 0:s.from)==null?void 0:t.pathname)||"/";I(R,{replace:!0})}},[S,I,A]);const V=async s=>{if(s.preventDefault(),a(""),d(""),!i||!l){a("Please fill in all required fields");return}if(r&&!u){a("Please enter your full name");return}v(!0);try{if(r){const{error:t}=await W({email:i,password:l,full_name:u});if(t)throw t;d("Account created successfully! Please check your email to verify your account."),f(""),h(""),y(""),p(!1)}else{const{error:t}=await T({email:i,password:l});if(t)throw t}}catch(t){a(t.message||"An error occurred. Please try again.")}finally{v(!1)}},q=()=>{N(!c)},O=async()=>{try{C(!0),a(""),await K();const{data:s,error:t}=await Q();if(t)throw console.error("Google OAuth error:",t),t;console.log("Google sign-in successful:",s)}catch(s){console.error("Error in Google sign-in:",s),a(s.message||"Failed to sign in with Google. Please try again.")}finally{C(!1)}};return B?e.jsx(n,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(g,{})}):e.jsx(X,{component:"main",maxWidth:"xs",children:e.jsx(n,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsxs(H,{elevation:3,sx:{p:4,width:"100%",borderRadius:2,backgroundColor:D.palette.background.paper},children:[e.jsx(P,{component:"h1",variant:"h5",align:"center",gutterBottom:!0,children:r?"Create an Account":"Sign In"}),j&&e.jsx(E,{severity:"error",sx:{mb:2},children:j}),b&&e.jsx(E,{severity:"success",sx:{mb:2},children:b}),e.jsxs(n,{sx:{mb:3},children:[e.jsx(G,{fullWidth:!0,variant:"outlined",onClick:O,disabled:w||m,startIcon:w?e.jsx(g,{size:20}):e.jsx(se,{}),sx:{py:1.5,mb:2,borderRadius:1,textTransform:"none",borderColor:"divider","&:hover":{borderColor:"text.primary"}},children:"Continue with Google"}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",my:2},children:[e.jsx(L,{sx:{flexGrow:1}}),e.jsx(P,{variant:"body2",color:"text.secondary",sx:{px:2},children:"OR"}),e.jsx(L,{sx:{flexGrow:1}})]})]}),e.jsxs(n,{component:"form",onSubmit:V,noValidate:!0,children:[r&&e.jsx(x,{margin:"normal",required:!0,fullWidth:!0,id:"fullName",label:"Full Name",name:"fullName",autoComplete:"name",autoFocus:r,value:u,onChange:s=>y(s.target.value),sx:{mb:2}}),e.jsx(x,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!r,value:i,onChange:s=>f(s.target.value),sx:{mb:2}}),e.jsx(x,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:c?"text":"password",id:"password",autoComplete:"current-password",value:l,onChange:s=>h(s.target.value),InputProps:{endAdornment:e.jsx(Y,{position:"end",children:e.jsx(J,{"aria-label":"toggle password visibility",onClick:q,edge:"end",children:c?e.jsx(Z,{}):e.jsx(ee,{})})})}}),e.jsx(G,{type:"submit",fullWidth:!0,variant:"contained",disabled:m,sx:{mt:3,mb:2,py:1.5},children:m?e.jsx(g,{size:24,color:"inherit"}):r?"Create Account":"Sign In"}),e.jsx(n,{sx:{textAlign:"center",mt:2},children:e.jsx(F,{component:k,to:"#",variant:"body2",onClick:s=>{s.preventDefault(),p(!r),a(""),d("")},children:r?"Already have an account? Sign in":"Don't have an account? Sign up"})}),!r&&e.jsx(n,{sx:{textAlign:"center",mt:2},children:e.jsx(F,{component:k,to:"/forgot-password",variant:"body2",children:"Forgot password?"})})]})]})})})}export{de as default};
//# sourceMappingURL=Login-aced7d4b.js.map
