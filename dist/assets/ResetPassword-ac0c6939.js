import{r as s,aa as V,af as A,ab as B,j as e,B as o,P as f,T as c,L as g,b as W,C as E}from"./main-09baa353.js";import{C as b}from"./Container-b91c59b6.js";import{A as m}from"./Alert-75872dac.js";import{L as y}from"./Link-60bea78a.js";import{T as j}from"./TextField-9180dea0.js";import{V as q,a as D}from"./VisibilityOff-3ce64de2.js";import"./Select-f366e320.js";import"./useControlled-0aca5942.js";function G(){const[a,P]=s.useState(""),[l,v]=s.useState(""),[n,k]=s.useState(!1),[d,r]=s.useState(""),[u,x]=s.useState(""),[p,h]=s.useState(!1),[S,C]=s.useState(!0),{updatePassword:T}=V(),[w]=A(),I=B();s.useEffect(()=>{w.get("access_token")||(C(!1),r("Invalid or expired reset link"))},[w]);const L=async t=>{if(t.preventDefault(),!a||!l){r("Please fill in all fields");return}if(a!==l){r("Passwords do not match");return}if(a.length<6){r("Password must be at least 6 characters long");return}h(!0),r(""),x("");try{const{error:i}=await T(a);if(i)throw i;x("Your password has been reset successfully. You can now sign in with your new password."),setTimeout(()=>{I("/login")},3e3)}catch(i){r(i.message||"Failed to reset password. Please try again.")}finally{h(!1)}},R=()=>{k(!n)};return S?e.jsx(b,{component:"main",maxWidth:"xs",children:e.jsx(o,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsxs(f,{elevation:3,sx:{p:4,width:"100%",borderRadius:2},children:[e.jsx(c,{component:"h1",variant:"h5",align:"center",gutterBottom:!0,children:"Reset Your Password"}),e.jsx(c,{variant:"body2",color:"text.secondary",align:"center",sx:{mb:3},children:"Please enter your new password below."}),d&&e.jsx(m,{severity:"error",sx:{mb:2},children:d}),u&&e.jsx(m,{severity:"success",sx:{mb:2},children:u}),e.jsxs(o,{component:"form",onSubmit:L,noValidate:!0,children:[e.jsx(j,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"New Password",type:n?"text":"password",id:"password",autoComplete:"new-password",value:a,onChange:t=>P(t.target.value),InputProps:{endAdornment:e.jsx(IconButton,{"aria-label":"toggle password visibility",onClick:R,edge:"end",children:n?e.jsx(q,{}):e.jsx(D,{})})},sx:{mb:2}}),e.jsx(j,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm New Password",type:n?"text":"password",id:"confirmPassword",value:l,onChange:t=>v(t.target.value),sx:{mb:2}}),e.jsx(W,{type:"submit",fullWidth:!0,variant:"contained",disabled:p,sx:{mt:2,mb:2,py:1.5},children:p?e.jsx(E,{size:24,color:"inherit"}):"Reset Password"}),e.jsx(o,{sx:{textAlign:"center",mt:2},children:e.jsx(y,{component:g,to:"/login",variant:"body2",children:"Back to Sign In"})})]})]})})}):e.jsx(b,{component:"main",maxWidth:"xs",children:e.jsx(o,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsxs(f,{elevation:3,sx:{p:4,width:"100%",borderRadius:2},children:[e.jsx(m,{severity:"error",sx:{mb:2},children:d}),e.jsx(c,{variant:"body1",align:"center",sx:{mb:2},children:"The password reset link is invalid or has expired."}),e.jsx(o,{sx:{textAlign:"center",mt:3},children:e.jsx(y,{component:g,to:"/forgot-password",variant:"body1",children:"Request a new reset link"})})]})})})}export{G as default};
//# sourceMappingURL=ResetPassword-ac0c6939.js.map
