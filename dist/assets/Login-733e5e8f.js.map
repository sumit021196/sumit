{"version":3,"file":"Login-733e5e8f.js","sources":["../../node_modules/@mui/icons-material/esm/Google.js","../../src/pages/Login.jsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z\"\n}), 'Google');","import { useState, useEffect } from 'react';\nimport { useNavigate, useLocation, Link as RouterLink } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthProvider';\nimport { \n  Container, \n  Box, \n  Typography, \n  TextField, \n  Button, \n  Link, \n  Paper, \n  Divider, \n  Alert, \n  IconButton, \n  InputAdornment,\n  useTheme,\n  CircularProgress\n} from '@mui/material';\nimport { Visibility, VisibilityOff, Google } from '@mui/icons-material';\nimport { signInWithGoogle, signOut } from '../supabaseClient';\n\nexport default function Login() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [isSignUp, setIsSignUp] = useState(false);\n  const [fullName, setFullName] = useState('');\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [isGoogleLoading, setIsGoogleLoading] = useState(false);\n  \n  const { user, signIn, signUp, loading } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const theme = useTheme();\n\n  // Redirect if already logged in\n  useEffect(() => {\n    if (user) {\n      const from = location.state?.from?.pathname || '/';\n      navigate(from, { replace: true });\n    }\n  }, [user, navigate, location]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n    \n    if (!email || !password) {\n      setError('Please fill in all required fields');\n      return;\n    }\n\n    if (isSignUp && !fullName) {\n      setError('Please enter your full name');\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      if (isSignUp) {\n        const { error } = await signUp({ email, password, full_name: fullName });\n        if (error) throw error;\n        setSuccess('Account created successfully! Please check your email to verify your account.');\n        // Reset form\n        setEmail('');\n        setPassword('');\n        setFullName('');\n        setIsSignUp(false);\n      } else {\n        const { error } = await signIn({ email, password });\n        if (error) throw error;\n      }\n    } catch (err) {\n      setError(err.message || 'An error occurred. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const togglePasswordVisibility = () => {\n    setShowPassword(!showPassword);\n  };\n\n  const handleGoogleSignIn = async () => {\n    try {\n      setIsGoogleLoading(true);\n      setError('');\n      \n      // Clear any existing sessions first\n      await signOut();\n      \n      // Trigger Google OAuth sign-in\n      const { data, error } = await signInWithGoogle();\n      \n      if (error) {\n        console.error('Google OAuth error:', error);\n        throw error;\n      }\n      \n      // If we get here, the OAuth flow was successful\n      console.log('Google sign-in successful:', data);\n      \n      // The user will be redirected back to the app after successful authentication\n    } catch (err) {\n      console.error('Error in Google sign-in:', err);\n      setError(err.message || 'Failed to sign in with Google. Please try again.');\n    } finally {\n      setIsGoogleLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <Box\n        sx={{\n          marginTop: 8,\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n        }}\n      >\n        <Paper \n          elevation={3} \n          sx={{ \n            p: 4, \n            width: '100%',\n            borderRadius: 2,\n            backgroundColor: theme.palette.background.paper\n          }}\n        >\n          <Typography component=\"h1\" variant=\"h5\" align=\"center\" gutterBottom>\n            {isSignUp ? 'Create an Account' : 'Sign In'}\n          </Typography>\n          \n          {error && (\n            <Alert severity=\"error\" sx={{ mb: 2 }}>\n              {error}\n            </Alert>\n          )}\n          \n          {success && (\n            <Alert severity=\"success\" sx={{ mb: 2 }}>\n              {success}\n            </Alert>\n          )}\n\n          {/* Social Login Buttons */}\n          <Box sx={{ mb: 3 }}>\n            <Button\n              fullWidth\n              variant=\"outlined\"\n              onClick={handleGoogleSignIn}\n              disabled={isGoogleLoading || isLoading}\n              startIcon={isGoogleLoading ? <CircularProgress size={20} /> : <Google />}\n              sx={{\n                py: 1.5,\n                mb: 2,\n                borderRadius: 1,\n                textTransform: 'none',\n                borderColor: 'divider',\n                '&:hover': {\n                  borderColor: 'text.primary',\n                },\n              }}\n            >\n              Continue with Google\n            </Button>\n            \n            <Box sx={{ display: 'flex', alignItems: 'center', my: 2 }}>\n              <Divider sx={{ flexGrow: 1 }} />\n              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ px: 2 }}>\n                OR\n              </Typography>\n              <Divider sx={{ flexGrow: 1 }} />\n            </Box>\n          </Box>\n\n          <Box component=\"form\" onSubmit={handleSubmit} noValidate>\n            {isSignUp && (\n              <TextField\n                margin=\"normal\"\n                required\n                fullWidth\n                id=\"fullName\"\n                label=\"Full Name\"\n                name=\"fullName\"\n                autoComplete=\"name\"\n                autoFocus={isSignUp}\n                value={fullName}\n                onChange={(e) => setFullName(e.target.value)}\n                sx={{ mb: 2 }}\n              />\n            )}\n            \n            <TextField\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"email\"\n              label=\"Email Address\"\n              name=\"email\"\n              autoComplete=\"email\"\n              autoFocus={!isSignUp}\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              sx={{ mb: 2 }}\n            />\n\n            <TextField\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"password\"\n              label=\"Password\"\n              type={showPassword ? 'text' : 'password'}\n              id=\"password\"\n              autoComplete=\"current-password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              InputProps={{\n                endAdornment: (\n                  <InputAdornment position=\"end\">\n                    <IconButton\n                      aria-label=\"toggle password visibility\"\n                      onClick={togglePasswordVisibility}\n                      edge=\"end\"\n                    >\n                      {showPassword ? <VisibilityOff /> : <Visibility />}\n                    </IconButton>\n                  </InputAdornment>\n                ),\n              }}\n            />\n\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              disabled={isLoading}\n              sx={{ mt: 3, mb: 2, py: 1.5 }}\n            >\n              {isLoading ? (\n                <CircularProgress size={24} color=\"inherit\" />\n              ) : isSignUp ? (\n                'Create Account'\n              ) : (\n                'Sign In'\n              )}\n            </Button>\n\n            <Box sx={{ textAlign: 'center', mt: 2 }}>\n              <Link \n                component={RouterLink} \n                to=\"#\" \n                variant=\"body2\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  setIsSignUp(!isSignUp);\n                  setError('');\n                  setSuccess('');\n                }}\n              >\n                {isSignUp \n                  ? 'Already have an account? Sign in' \n                  : \"Don't have an account? Sign up\"}\n              </Link>\n            </Box>\n\n            {!isSignUp && (\n              <Box sx={{ textAlign: 'center', mt: 2 }}>\n                <Link \n                  component={RouterLink} \n                  to=\"/forgot-password\" \n                  variant=\"body2\"\n                >\n                  Forgot password?\n                </Link>\n              </Box>\n            )}\n          </Box>\n        </Paper>\n      </Box>\n    </Container>\n  );\n}\n"],"names":["Google","createSvgIcon","_jsx","Login","email","setEmail","useState","password","setPassword","showPassword","setShowPassword","isSignUp","setIsSignUp","fullName","setFullName","error","setError","success","setSuccess","isLoading","setIsLoading","isGoogleLoading","setIsGoogleLoading","user","signIn","signUp","loading","useAuth","navigate","useNavigate","location","useLocation","theme","useTheme","useEffect","from","_b","_a","handleSubmit","e","err","togglePasswordVisibility","handleGoogleSignIn","signOut","data","signInWithGoogle","jsx","Box","CircularProgress","Container","jsxs","Paper","Typography","Alert","Button","Divider","TextField","InputAdornment","IconButton","VisibilityOff","Visibility","Link","RouterLink"],"mappings":"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","x_google_ignoreList":[0]}